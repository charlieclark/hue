!function e(t,o,n){function i(r,s){if(!o[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){var o=t[r][1][e];return i(o?o:e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({1:[function(e){window.Common={path:{assets:"assets/",img:"assets/img/",audio:"assets/audio/"},sizes:{frame:10}};var t=(e("controllers/appRouter"),e("views/appLayout")),o=e("views/calendarWrapper"),n=e("roomData"),i=Marionette.Application.extend({initialize:function(){},onStart:function(){t.render();var e=new o({model:new Backbone.Model({rooms:n})});t.getRegion("main").show(e),Backbone.history.start({pushState:!1})}});$(function(){window.app=new i,window.app.start()})},{"controllers/appRouter":2,roomData:9,"views/appLayout":13,"views/calendarWrapper":16}],2:[function(e,t){var o=Marionette.AppRouter.extend({controller:{defaultRoute:function(){},roomRoute:function(){}},appRoutes:{"room/:key":"roomRoute","*actions":"defaultRoute"}});t.exports=new o},{}],3:[function(e,t){function o(){gapi.client.setApiKey(c),n()}function n(){gapi.auth.authorize({client_id:l,scope:u,immediate:!1},i)}function i(e){e&&a()}function a(){gapi.client.load("calendar","v3",function(){r()})}function r(){var e=(new Date).toISOString();_.each(d,function(t,o){var n=gapi.client.calendar.events.list({calendarId:t.calendarId,timeMin:e});n.then(function(e){s(o,e.result)},function(e){console.log("Error: "+e.result.error.message)})})}function s(e,t){h.trigger("eventsLoaded",{key:e,data:t})}e("pipe");window.handleClientLoad=function(){console.log("google api loaded"),o()};var l="433839723365-u7grldtvf8pabjkj4frcio3cv5hit8fm.apps.googleusercontent.com",c="AIzaSyBsKdTplRXuEwgvPSH_gGF8OGsw35t15v0",u="https://www.googleapis.com/auth/calendar",d=e("roomData"),h=_.extend({},Backbone.Events);t.exports={events:h}},{pipe:8,roomData:9}],4:[function(e,t){function o(){i=io.connect("//localhost:3000"),i.on("connect",function(){a=!0})}function n(e){a&&i.emit("update_data",e)}var i=null,a=!1;o(),t.exports={init:o,update:n,connected:a}},{}],5:[function(e,t){function o(e,t){this._hsl={h:0,s:0,l:0},this._lightId=e,this._patternId=t,this._step=0,this.newSequence(this._patternId)}var n=e("controllers/hueConnect");o.prototype={newSequence:function(e){var t=i[e],o=t.sequence;this._tweener=new TimelineMax({repeat:t.repeat,onComplete:function(){console.log("complete!")}}),_.each(o,function(e){this.queueColor(e)},this)},queueColor:function(e){var t=one.color(e.color),o=e.fade,i=e.wait,a={h:Math.floor(360*t.h()),s:Math.floor(100*t.s()),l:Math.floor(100*t.l())},r={onStart:function(){n.update([{id:this._lightId,data:{hsl:a,duration:o}}])},onStartScope:this};this._tweener.to(this._hsl,o,_.extend(r,a)),this._tweener.to(this._hsl,i,{})}};var i={test:{repeat:-1,sequence:[{color:"#FB1911",fade:1,wait:1}]}};t.exports=o},{"controllers/hueConnect":4}],6:[function(e,t){var o=Backbone.Model.extend({defaults:{summary:"n/a",description:"n/a",start:"n/a",end:"n/a"}});t.exports=o},{}],7:[function(e,t){var o=new(Backbone.Model.extend({defaults:{}}));t.exports=o},{}],8:[function(e,t){var o=_.extend({},Backbone.Events);t.exports=o},{}],9:[function(e,t){t.exports={1:{calendarId:"b-reel.com_2d3238373936363232373831@resource.calendar.google.com"},2:{calendarId:"b-reel.com_2d31323737383833342d323432@resource.calendar.google.com"},3:{calendarId:"b-reel.com_3136353339363139393338@resource.calendar.google.com"},5:{calendarId:"b-reel.com_2d34343238393637302d363433@resource.calendar.google.com"}}},{}],10:[function(e,t){t.exports="<% if( summary ){ %>\n	<h2>summary : <%= summary %></h2>\n<% } %>\n\n<% if( description ){ %>\n	<h3>description : <%= description %></h3>\n<% } %>\n\n<% if( start ){ %>\n	<h3>start : <%= start.dateTime %></h3>\n<% } %>\n\n<% if( end ){ %>\n	<h3>end : <%= end.dateTime %></h3>\n<% } %>"},{}],11:[function(e,t){t.exports='<button id="close"></button>\n<div id="event-list"></div> '},{}],12:[function(e,t){t.exports='\n<div id="room-split">\n	<% _.each( rooms, function( data, key ){ %>\n		<div id="room-<%= key %>" class="room" data-id="<%= key %>">room <%= key %></div>\n	<% }); %>\n</div>\n<div id="room-single"></div>\n\n<!-- TEST -->\n<div class="test">\n	<div>\n		<input id="hex-input" type="text"></input>\n		<button id="hex">hex</button>\n	</div>\n	<button id="test">test</button>\n	<input class="color" type="color" name="favcolor">\n</div>\n\n '},{}],13:[function(e,t){var o=e("models/state"),n=Marionette.LayoutView.extend({el:"#content",template:!1,regions:{main:"#main"},initialize:function(){var e=this;this.$html=$("html"),this.$html.removeClass("hidden"),$(window).resize(function(){e.onResizeWindow()}).resize(),this.listenForState()},listenForState:function(){this.listenTo(o,"change",function(e){this.onStateChange(e.changed,e._previousAttributes)},this),this.onStateChange(o.toJSON())},onStateChange:function(e,t){_.each(e,function(e,o){if(_.isBoolean(e))this.$html.toggleClass("state-"+o,e),this.$html.toggleClass("state-not-"+o,!e);else{var n=t[o];n&&this.$html.toggleClass("state-"+o+"-"+n,!1),this.$html.toggleClass("state-"+o+"-"+e,!0)}},this)},onResizeWindow:function(){Common.ww=$(window).width(),Common.wh=$(window).height()}});t.exports=new n},{"models/state":7}],14:[function(e,t){var o=Marionette.ItemView.extend({className:"item",template:_.template(e("templates/calendarItem.html")),ui:{title:"h2"},events:{"click @ui.title":function(){}}});t.exports=o},{"templates/calendarItem.html":10}],15:[function(e,t){var o=e("views/calendarItem"),n=e("models/calendarModel"),i=e("controllers/appRouter"),a=Marionette.LayoutView.extend({template:_.template(e("templates/calendarSingle.html")),regions:{eventList:"#event-list"},ui:{closeButton:"#close"},events:{"click @ui.closeButton":"onClose"},initialize:function(){this.collectionView=new Marionette.CollectionView({childView:o,collection:new Backbone.Collection}),this.listenTo(this.model,"change:roomData",this.updateEvents)},onShow:function(){this.getRegion("eventList").show(this.collectionView),this.updateEvents()},onClose:function(){i.navigate("/",{trigger:!0})},updateEvents:function(){var e=this.model.get("roomData");_.each(e.items,function(e){var t=new n(e);this.collectionView.collection.add(t)},this)}});t.exports=a},{"controllers/appRouter":2,"models/calendarModel":6,"templates/calendarSingle.html":11,"views/calendarItem":14}],16:[function(e,t){var o=e("controllers/appRouter"),n=e("controllers/calendarLoad"),i=e("views/calendarSingle"),a=e("controllers/hueConnect"),r=e("controllers/lightPattern"),s=(e("roomData"),Marionette.LayoutView.extend({template:_.template(e("templates/calendarWrapper.html")),regions:{roomSingle:"#room-single"},ui:{colorPicker:".color",test:"#test",hexButton:"#hex",hexInput:"#hex-input",roomSplit:"#room-split",room:".room"},events:{"click @ui.test":function(){for(var e=0;5>e;e++)new r(e+1,"test")},"click @ui.hexButton":function(){var e=this.ui.hexInput.val();this.testColor(e)},"click @ui.room":function(e){var t=$(e.currentTarget).data("id");o.navigate("room/"+t,{trigger:!0})}},initialize:function(){this.calendarStore={},this.listenTo(n.events,"eventsLoaded",this.eventsLoaded)},onShow:function(){var e=this.ui.colorPicker,t=this;$(e).change(function(){var e=$(this).val();t.testColor(e)}),this.listenTo(o,"route:roomRoute",function(e){this.showRoom(e)}),this.listenTo(o,"route:defaultRoute",this.showSplit)},showSplit:function(){var e=this.ui.roomSplit,t=this.getRegion("roomSingle").$el;e.show(),t.hide()},showRoom:function(e){var t=this.ui.roomSplit,o=this.calendarStore[e];if(o){var n=new i({model:o}),a=this.getRegion("roomSingle").show(n);$singleEl=a.$el,$singleEl.show(),t.hide()}else this.queuedKey=e},checkQueue:function(){this.queuedKey&&this.showRoom(this.queuedKey)},testColor:function(e){var t=one.color(e),o={h:Math.floor(360*t.h()),s:Math.floor(100*t.s()),l:Math.floor(100*t.l())};a.update([{id:1,data:{hsl:o,duration:1}},{id:2,data:{hsl:o,duration:1}},{id:3,data:{hsl:o,duration:1}},{id:4,data:{hsl:o,duration:1}},{id:5,data:{hsl:o,duration:1}}])},eventsLoaded:function(e){var t=e.key,o=this.calendarStore[t]||new Backbone.Model;o.set("roomData",e.data),this.calendarStore[t]=o,this.checkQueue()}}));t.exports=s},{"controllers/appRouter":2,"controllers/calendarLoad":3,"controllers/hueConnect":4,"controllers/lightPattern":5,roomData:9,"templates/calendarWrapper.html":12,"views/calendarSingle":15}]},{},[1]);